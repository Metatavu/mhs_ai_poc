(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1364)}])},1364:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var l=n(5893),r=n(7597),a=n.n(r),s=n(7294);function c(){let[e,t]=(0,s.useState)("search"),[n,r]=(0,s.useState)("gpt-4-turbo"),[c,i]=(0,s.useState)(""),[u,o]=(0,s.useState)("fi"),[h,d]=(0,s.useState)(.77),[x,f]=(0,s.useState)(!1),[p,m]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[_,g]=(0,s.useState)([]),N=(0,s.useRef)(null);return(0,s.useEffect)(()=>{j?(N.current&&clearInterval(N.current),j&&(N.current=setInterval(()=>{fetch("articles/answerstatus/".concat(j),{method:"GET"}).then(e=>e.json()).then(e=>{e.status&&"PENDING"==e.status||(clearInterval(N.current),m(e.answer[0].message.content),g(e.sources.map(e=>({title:e.articleTitle,content:e.content,url:e.articleUrl,_score:e._score}))),f(!1))}).catch(()=>{clearInterval(N.current),f(!1),alert("Error creating answer")})},1e3))):N.current&&clearInterval(N.current)},[j]),(0,l.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-24 ".concat(a().className),children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"action-input",children:"Toiminto: "}),"answer"===e&&(0,l.jsx)("label",{htmlFor:"model-input",children:"GPT-malli: "}),"answer"===e&&(0,l.jsx)("label",{htmlFor:"accuracy-input",children:"Tarkkuus (0 - 1): "}),(0,l.jsx)("label",{htmlFor:"lang-input",children:"Kieli: "}),(0,l.jsx)("label",{htmlFor:"query-input",children:"Hae / kysy: "})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("select",{id:"action-input",value:e,onChange:e=>t(e.target.value),children:[(0,l.jsx)("option",{value:"search",children:"Haku"}),(0,l.jsx)("option",{value:"answer",children:"Vastaus"})]}),"answer"===e&&(0,l.jsxs)("select",{id:"model-input",value:n,onChange:e=>r(e.target.value),children:[(0,l.jsx)("option",{value:"gpt-4-turbo",children:"gpt-4-turbo"}),(0,l.jsx)("option",{value:"gpt-4",children:"gpt-4"}),(0,l.jsx)("option",{value:"gpt-3.5-turbo",children:"gpt-3.5-turbo"})]}),"answer"===e&&(0,l.jsx)("input",{id:"accuracy-input",value:h,onChange:e=>d(Number(e.target.value)),step:.01,type:"number"}),(0,l.jsxs)("select",{id:"lang-input",value:u,onChange:e=>o(e.target.value),children:[(0,l.jsx)("option",{value:"fi",children:"Suomi"}),(0,l.jsx)("option",{value:"sv",children:"Ruotsi"})]}),(0,l.jsx)("input",{id:"query-input",value:c,onChange:e=>i(e.target.value),type:"text"})]})]}),!x&&(0,l.jsx)("div",{className:"flex flex-row",children:(0,l.jsx)("button",{onClick:()=>{let t;return f(!0),g([]),m(""),t={query:c,lang:u},void("answer"===e&&(t.accuracy=h,t.model=n),fetch("search"===e?"articles/search":"articles/answer",{headers:new Headers({"content-type":"application/json"}),method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(t=>{if("answer"==e){if(t.error){f(!1),alert(t.error);return}v(t.token)}else g(t.hits.map(e=>({title:e._source.articleTitle,content:e._source.content,url:e._source.articleUrl,_score:e._score}))),f(!1)}).catch(()=>f(!1)))},children:"L\xe4het\xe4"})}),x&&(0,l.jsx)("div",{className:"flex flex-row",children:(0,l.jsx)("p",{children:"Ladataan..."})}),p.length>0&&(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("pre",{children:p})}),(0,l.jsx)("div",{className:"flex flex-col",children:_.map((e,t)=>(0,l.jsxs)("div",{className:"result-container",children:[(0,l.jsx)("div",{children:(0,l.jsx)("a",{href:e.url,children:(0,l.jsx)("h4",{className:"result-title",children:e.title})})}),(0,l.jsx)("div",{children:(0,l.jsx)("small",{children:e._score})}),(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})]},t))})]})}},7597:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);